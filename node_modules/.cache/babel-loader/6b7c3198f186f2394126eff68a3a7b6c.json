{"ast":null,"code":"import _Modal from \"@ucloud-fe/react-components/lib/components/Modal\";\nimport _Input from \"@ucloud-fe/react-components/lib/components/Input\";\nimport _Radio from \"@ucloud-fe/react-components/lib/components/Radio\";\nimport _Select from \"@ucloud-fe/react-components/lib/components/Select\";\nimport _Form from \"@ucloud-fe/react-components/lib/components/Form\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/lixiqing/work/URTC-DEOM/src/components/record.jsx\";\n\n// @ts-nocheck\n\n/* eslint-disable */\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport sdk, { Client } from \"urtc-sdk\";\nimport \"./settings.css\";\nimport { isPC } from \"../util/index\";\nimport { recordConfig } from \"../config/record\";\nimport config from \"../config\";\nconst {\n  Item\n} = _Form;\nconst {\n  Option\n} = _Select;\nconst itemLayout = {\n  labelCol: {\n    span: 2\n  },\n  controllerCol: {\n    span: 10\n  }\n};\nlet Record = (_dec = inject(\"store\"), _dec(_class = observer(_class = (_temp = class Record extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.recordClose = () => {\n      this.props.close && this.props.close(false);\n    };\n\n    this.state = {\n      recordVisible: false,\n      checkLayout: \"flow\",\n      checkWatermark: \"time\",\n      checkWatermarkPos: \"left-top\",\n      watermarkMsg: \"\",\n      isPhone: !isPC()\n    };\n    this.recordClose = this.recordClose.bind(this);\n    this.recordOk = this.recordOk.bind(this);\n    this.alllayoutChange = this.alllayoutChange.bind(this);\n    this.watermarkTypeChange = this.watermarkTypeChange.bind(this);\n    this.watermarkPosChange = this.watermarkPosChange.bind(this);\n    this.watermarkMsgChange = this.watermarkMsgChange.bind(this);\n  }\n\n  componentDidMount() {// let storeSettings = this.props.store.settings;\n    // storeSettings.startRecord(true);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(nextProps);\n    console.log(this.props); // if (this.props.visible !== nextProps.visible) {\n    //   let storeRecord = this.props.store.record;\n    //   this.setState({\n    //     recordVisible: true,\n    //   });\n    // }\n    // this.setState({\n    //   recordVisible: true,\n    // });\n    // this.setState({\n    //       recordVisible: true,\n    //     });\n  }\n\n  recordOk() {\n    console.log(this.state);\n    const clientData = this.props.store.client;\n    const client = clientData.clientData;\n    const recordStore = this.props.store.record; //this.bucket = \"urtc-test\";\n    //this.region = \"cn-bj\";\n\n    client.startRecord({\n      bucket: recordConfig.bucket,\n      region: recordConfig.region,\n      layout: {\n        type: this.state.checkLayout\n      },\n      waterMark: {\n        position: this.state.checkWatermarkPos,\n        type: this.state.checkWatermark,\n        remarks: this.state.watermarkMsg\n      }\n    }, function (e, d) {\n      console.log(e, d);\n\n      if (!e) {\n        recordStore.setUrl(`http://urtc-test.cn-bj.ufileos.com/${d.FileName}.mp4`);\n      }\n\n      console.log(d);\n    });\n    this.props.close(false); // this.setState({\n    //   recordVisible: false,\n    // });\n    // recordStore.recordStart(false);\n  }\n\n  alllayoutChange(e) {\n    this.setState({\n      checkLayout: e\n    });\n  }\n\n  watermarkTypeChange(e) {\n    this.setState({\n      checkWatermark: e\n    });\n  }\n\n  watermarkPosChange(e) {\n    this.setState({\n      checkWatermarkPos: e\n    });\n  }\n\n  watermarkMsgChange(e) {\n    this.setState({\n      watermarkMsg: e.target.value\n    });\n  }\n\n  render() {\n    const {\n      show\n    } = this.props;\n    const {\n      checkLayout,\n      checkWatermark,\n      checkWatermarkPos,\n      watermarkMsg,\n      isPhone\n    } = this.state;\n    const itemLayout = {\n      labelCol: {\n        span: isPhone ? 4 : 2\n      },\n      controllerCol: {\n        span: isPhone ? 8 : 10\n      }\n    };\n    const allLayouts = [{\n      label: \"平铺\",\n      value: \"flow\"\n    }, {\n      label: \"垂直\",\n      value: \"main\"\n    }, {\n      label: \"平铺2\",\n      value: \"customFlow\"\n    }, {\n      label: \"垂直2\",\n      value: \"customMain\"\n    }, {\n      label: \"单画面\",\n      value: \"single\"\n    }];\n    const watermarkType = [{\n      label: \"时间\",\n      value: \"time\"\n    }, {\n      label: \"图片\",\n      value: \"image\"\n    }, {\n      label: \"文本\",\n      value: \"text\"\n    }];\n    const watermarkPos = [{\n      // 'left-top' | 'left-bottom' | 'right-top' | 'right-bottom'\n      label: \"左上\",\n      value: \"left-top\"\n    } // {\n    //   label: \"左下\",\n    //   value: \"left-bottom\",\n    // },\n    // {\n    //   label: \"右上\",\n    //   value: \"right-top\",\n    // },\n    // {\n    //   label: \"右下\",\n    //   value: \"right-bottom\",\n    // },\n    ];\n    return /*#__PURE__*/React.createElement(_Modal, {\n      visible: show,\n      size: isPhone ? \"sm\" : \"md\",\n      onClose: this.recordClose,\n      onOk: this.recordOk,\n      title: \"\\u8BBE\\u7F6E\\u5F55\\u5236\\u53C2\\u6570\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_Form, {\n      className: \"settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u6DF7\\u6D41\\u5E03\\u5C40\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Radio.Group, {\n      value: checkLayout,\n      onChange: this.alllayoutChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, allLayouts.map((e, v) => /*#__PURE__*/React.createElement(_Radio, {\n      key: v,\n      value: e.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }, e.label)))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u6C34\\u5370\\u7C7B\\u578B\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Radio.Group, {\n      value: checkWatermark,\n      onChange: this.watermarkTypeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }, watermarkType.map((e, v) => /*#__PURE__*/React.createElement(_Radio, {\n      key: v,\n      value: e.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    }, e.label)))), checkWatermark == \"image\" || checkWatermark == \"text\" ? /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u6C34\\u5370\\u5185\\u5BB9\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(_Input, {\n      vlaue: watermarkMsg,\n      onChange: this.watermarkMsgChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    })) : null, /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u6C34\\u5370\\u4F4D\\u7F6E\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Radio.Group, {\n      value: checkWatermarkPos,\n      onChange: this.watermarkPosChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, watermarkPos.map((e, v) => /*#__PURE__*/React.createElement(_Radio, {\n      key: v,\n      value: e.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }, e.label))))));\n  }\n\n}, _temp)) || _class) || _class);\nexport default Record;","map":{"version":3,"sources":["/Users/lixiqing/work/URTC-DEOM/src/components/record.jsx"],"names":["React","observer","inject","sdk","Client","isPC","recordConfig","config","Item","Option","itemLayout","labelCol","span","controllerCol","Record","Component","constructor","props","recordClose","close","state","recordVisible","checkLayout","checkWatermark","checkWatermarkPos","watermarkMsg","isPhone","bind","recordOk","alllayoutChange","watermarkTypeChange","watermarkPosChange","watermarkMsgChange","componentDidMount","componentWillReceiveProps","nextProps","console","log","clientData","store","client","recordStore","record","startRecord","bucket","region","layout","type","waterMark","position","remarks","e","d","setUrl","FileName","setState","target","value","render","show","allLayouts","label","watermarkType","watermarkPos","map","v"],"mappings":"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","sourcesContent":["// @ts-nocheck\n/* eslint-disable */\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport sdk, { Client } from \"urtc-sdk\";\nimport \"./settings.css\";\nimport { isPC } from \"../util/index\";\nimport { recordConfig } from \"../config/record\";\n\nimport {\n  Modal,\n  Input,\n  Form,\n  Select,\n  Radio,\n  Message,\n} from \"@ucloud-fe/react-components\";\nimport config from \"../config\";\nconst { Item } = Form;\nconst { Option } = Select;\nconst itemLayout = {\n  labelCol: {\n    span: 2,\n  },\n  controllerCol: {\n    span: 10,\n  },\n};\n\n@inject(\"store\")\n@observer\nclass Record extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recordVisible: false,\n      checkLayout: \"flow\",\n      checkWatermark: \"time\",\n      checkWatermarkPos: \"left-top\",\n      watermarkMsg: \"\",\n      isPhone: !isPC(),\n    };\n    this.recordClose = this.recordClose.bind(this);\n    this.recordOk = this.recordOk.bind(this);\n    this.alllayoutChange = this.alllayoutChange.bind(this);\n    this.watermarkTypeChange = this.watermarkTypeChange.bind(this);\n    this.watermarkPosChange = this.watermarkPosChange.bind(this);\n    this.watermarkMsgChange = this.watermarkMsgChange.bind(this);\n  }\n  componentDidMount() {\n\n    // let storeSettings = this.props.store.settings;\n    // storeSettings.startRecord(true);\n  }\n  componentWillReceiveProps(nextProps) {\n    console.log(nextProps)\n    console.log(this.props)\n    // if (this.props.visible !== nextProps.visible) {\n    //   let storeRecord = this.props.store.record;\n    //   this.setState({\n    //     recordVisible: true,\n    //   });\n    // }\n    // this.setState({\n    //   recordVisible: true,\n    // });\n    // this.setState({\n    //       recordVisible: true,\n    //     });\n  }\n\n  recordClose = () => {\n    this.props.close && this.props.close(false);\n  };\n  recordOk() {\n    console.log(this.state)\n    const clientData = this.props.store.client;\n    const client = clientData.clientData;\n    const recordStore = this.props.store.record;\n    //this.bucket = \"urtc-test\";\n    //this.region = \"cn-bj\";\n    client.startRecord(\n      {\n        bucket: recordConfig.bucket,\n        region: recordConfig.region,\n        layout: {\n          type: this.state.checkLayout\n        },\n        waterMark: {\n          position: this.state.checkWatermarkPos,\n          type: this.state.checkWatermark,\n          remarks: this.state.watermarkMsg,\n        }\n      },\n      function (e, d) {\n        console.log(e, d);\n        if (!e) {\n\n          recordStore.setUrl(\n            `http://urtc-test.cn-bj.ufileos.com/${d.FileName}.mp4`\n          );\n        }\n        console.log(d);\n      }\n    );\n    this.props.close(false);\n    // this.setState({\n    //   recordVisible: false,\n    // });\n    // recordStore.recordStart(false);\n  }\n  alllayoutChange(e) {\n    this.setState({\n      checkLayout: e,\n    });\n  }\n  watermarkTypeChange(e) {\n    this.setState({\n      checkWatermark: e,\n    });\n  }\n  watermarkPosChange(e) {\n    this.setState({\n      checkWatermarkPos: e,\n    });\n  }\n  watermarkMsgChange(e) {\n    this.setState({\n      watermarkMsg: e.target.value,\n    });\n  }\n  render() {\n    const { show } = this.props;\n    const {\n      checkLayout,\n      checkWatermark,\n      checkWatermarkPos,\n      watermarkMsg,\n      isPhone,\n    } = this.state;\n    const itemLayout = {\n      labelCol: {\n        span: isPhone ? 4 : 2,\n      },\n      controllerCol: {\n        span: isPhone ? 8 : 10,\n      },\n    };\n    const allLayouts = [\n      {\n        label: \"平铺\",\n        value: \"flow\",\n      },\n      {\n        label: \"垂直\",\n        value: \"main\",\n      },\n      {\n        label: \"平铺2\",\n        value: \"customFlow\",\n      },\n      {\n        label: \"垂直2\",\n        value: \"customMain\",\n      },\n      {\n        label: \"单画面\",\n        value: \"single\",\n      },\n    ];\n    const watermarkType = [\n      {\n        label: \"时间\",\n        value: \"time\",\n      },\n      {\n        label: \"图片\",\n        value: \"image\",\n      },\n      {\n        label: \"文本\",\n        value: \"text\",\n      },\n    ];\n    const watermarkPos = [\n      {\n        // 'left-top' | 'left-bottom' | 'right-top' | 'right-bottom'\n        label: \"左上\",\n        value: \"left-top\",\n      },\n      // {\n      //   label: \"左下\",\n      //   value: \"left-bottom\",\n      // },\n      // {\n      //   label: \"右上\",\n      //   value: \"right-top\",\n      // },\n      // {\n      //   label: \"右下\",\n      //   value: \"right-bottom\",\n      // },\n    ];\n    return (\n      <Modal\n        visible={show}\n        size={isPhone ? \"sm\" : \"md\"}\n        onClose={this.recordClose}\n        onOk={this.recordOk}\n        title=\"设置录制参数\"\n      >\n        <Form className=\"settings\">\n          <Item label=\"混流布局：\" {...itemLayout}>\n            <Radio.Group value={checkLayout} onChange={this.alllayoutChange}>\n              {allLayouts.map((e, v) => (\n                <Radio key={v} value={e.value}>\n                  {e.label}\n                </Radio>\n              ))}\n            </Radio.Group>\n          </Item>\n          <Item label=\"水印类型：\" {...itemLayout}>\n            <Radio.Group\n              value={checkWatermark}\n              onChange={this.watermarkTypeChange}\n            >\n              {watermarkType.map((e, v) => (\n                <Radio key={v} value={e.value}>\n                  {e.label}\n                </Radio>\n              ))}\n            </Radio.Group>\n          </Item>\n          {checkWatermark == \"image\" || checkWatermark == \"text\" ? (\n            <Item label=\"水印内容：\" {...itemLayout}>\n              <Input vlaue={watermarkMsg} onChange={this.watermarkMsgChange} />\n            </Item>\n          ) : null}\n\n          <Item label=\"水印位置：\" {...itemLayout}>\n            <Radio.Group\n              value={checkWatermarkPos}\n              onChange={this.watermarkPosChange}\n            >\n              {watermarkPos.map((e, v) => (\n                <Radio key={v} value={e.value}>\n                  {e.label}\n                </Radio>\n              ))}\n            </Radio.Group>\n          </Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default Record;\n"]},"metadata":{},"sourceType":"module"}