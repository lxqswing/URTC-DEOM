{"ast":null,"code":"import _Modal from \"@ucloud-fe/react-components/lib/components/Modal\";\nimport _Input from \"@ucloud-fe/react-components/lib/components/Input\";\nimport _Select from \"@ucloud-fe/react-components/lib/components/Select\";\nimport _Form from \"@ucloud-fe/react-components/lib/components/Form\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/lixiqing/work/URTC-DEOM/src/components/settings.jsx\";\n\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport sdk from \"urtc-sdk\";\nimport \"./settings.css\";\nimport config from \"../config\";\nimport { isPC } from \"../util/index\";\nconst {\n  isSupportWebRTC\n} = sdk;\nconst {\n  Item\n} = _Form;\nconst {\n  Option\n} = _Select;\nconst itemLayout = {\n  labelCol: {\n    span: 2\n  },\n  controllerCol: {\n    span: 10\n  }\n};\nlet Settings = (_dec = inject(\"store\"), _dec(_class = observer(_class = (_temp = class Settings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.desktopProlieChange = e => {\n      const initData = this.state.initData;\n      let storeSettings = this.props.store.settings;\n      storeSettings.setParamKey(\"desktopProfile\", e);\n      this.setState({\n        initData: { ...initData,\n          desktopProfile: e\n        }\n      });\n    };\n\n    this.userIdChange = e => {\n      const initData = this.state.initData;\n      let storeSettings = this.props.store.settings;\n      storeSettings.setParamKey(\"userId\", e.target.value);\n      this.setState({\n        initData: { ...initData,\n          userId: e.target.value\n        }\n      });\n    };\n\n    this.state = {\n      loading: false,\n      visible: false,\n      initData: {\n        roomType: \"rtc\",\n        //房间类型\n        userRole: \"push-and-pull\",\n        //用户角色\n        userName: \"\",\n        //用户名\n        userId: \"\",\n        //id\n        videoInput: \"\",\n        //摄像头\n        audioInput: \"default\",\n        //麦克风\n        audioOutput: \"default\",\n        //扬声器\n        videoProlie: \"640*360\",\n        //视频分辨率\n        desktopProfile: \"1280*720\",\n        videoCodec: \"vp8\",\n        //视频编码\n        AppKey: 'kejin',\n        //AppKey\n        AppId: 'kejin',\n        //AppId\n        apiLink: '',\n        logLink: '',\n        signalLink: 'wss://rtc.example.com:5005'\n      },\n      videoInputList: [],\n      audioInputList: [],\n      audioOutputList: [],\n      videoProlieList: [],\n      videoCodecList: [],\n      AppKey: config.AppKey,\n      //AppKey\n      AppId: config.AppId,\n      //AppId\n      isPhone: !isPC()\n    };\n    this.setClose = this.setClose.bind(this);\n    this.roomTypeChange = this.roomTypeChange.bind(this);\n    this.userRoleChange = this.userRoleChange.bind(this);\n    this.setOk = this.setOk.bind(this);\n    this.userNameChange = this.userNameChange.bind(this);\n    this.videoInputChange = this.videoInputChange.bind(this);\n    this.audioInputChange = this.audioInputChange.bind(this);\n    this.audioOutputChange = this.audioOutputChange.bind(this);\n    this.videoProlieChange = this.videoProlieChange.bind(this);\n    this.videoCodecChange = this.videoCodecChange.bind(this);\n    this.AppKeyChange = this.AppKeyChange.bind(this);\n    this.AppIdChange = this.AppIdChange.bind(this);\n    this.apiLinkChange = this.apiLinkChange.bind(this);\n    this.logLinkChange = this.logLinkChange.bind(this);\n    this.signalLinkChange = this.signalLinkChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.getDeviceData();\n    this.getSupportProfile();\n    this.getSupportedCodec();\n    const initData = this.state.initData;\n    this.setState({\n      signalLink: initData.signalLink\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let storeSettings = this.props.store.settings;\n    const initData = this.state.initData;\n    this.setState({\n      setVisible: storeSettings.setVisible,\n      initData: { ...initData,\n        userId: storeSettings.userId\n      }\n    });\n  }\n\n  getSupportedCodec() {\n    sdk.getSupportedCodec(e => {\n      this.setState({\n        videoCodecList: e.video\n      });\n    });\n  }\n\n  getSupportProfile() {\n    this.setState({\n      videoProlieList: sdk.getSupportProfileNames()\n    });\n  }\n\n  getDeviceData() {\n    let _this = this;\n\n    let videoInput = [];\n    let audioInput = [];\n    let audioOutput = [];\n    sdk.getDevices(e => {\n      e.forEach(function (data) {\n        if (data.kind === \"videoinput\") {\n          console.log(\"device info \", data);\n          videoInput.push(data);\n        } else if (data.kind === \"audioinput\") {\n          audioInput.push(data);\n        } else if (data.kind === \"audiooutput\") {\n          audioOutput.push(data);\n        }\n      });\n      let storeSettings = this.props.store.settings;\n      console.log(\"videoInput[0].deviceId\", videoInput[0].deviceId);\n      storeSettings.setParamKey(\"videoInput\", videoInput[0].deviceId);\n      const initData = _this.state.initData;\n      this.setState({\n        videoInputList: videoInput,\n        audioInputList: audioInput,\n        audioOutputList: audioOutput,\n        initData: { ...initData,\n          videoInput: videoInput[0].deviceId\n        }\n      });\n    });\n  }\n\n  setClose() {\n    this.setState({\n      setVisible: false\n    });\n    let storeSettings = this.props.store.settings;\n    storeSettings.settingsActive(false); // console.log(this.props)\n    // this.props.visible(false)\n  }\n\n  roomTypeChange(e) {\n    const initData = this.state.initData;\n\n    if (e === \"rtc\") {\n      console.log(\"roomTypeChange\", e);\n      this.setState({\n        initData: { ...initData,\n          userRole: \"push-and-pull\",\n          roomType: e\n        }\n      });\n      let storeSettings = this.props.store.settings;\n      storeSettings.setParamKey(\"userRole\", \"push-and-pull\");\n      storeSettings.setParamKey(\"roomType\", e);\n    } else {\n      let storeSettings = this.props.store.settings;\n      storeSettings.setParamKey(\"roomType\", e);\n      this.setState({\n        initData: { ...initData,\n          roomType: e\n        }\n      });\n    }\n  }\n\n  userRoleChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"userRole\", e);\n    this.setState({\n      initData: { ...initData,\n        userRole: e\n      }\n    });\n  }\n\n  userNameChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"userName\", e.target.value);\n    this.setState({\n      initData: { ...initData,\n        userName: e.target.value\n      }\n    });\n  }\n\n  videoInputChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"videoInput\", e);\n    this.setState({\n      initData: { ...initData,\n        videoInput: e\n      }\n    });\n  }\n\n  audioInputChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"audioInput\", e);\n    this.setState({\n      initData: { ...initData,\n        audioInput: e\n      }\n    });\n  }\n\n  audioOutputChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"audioOutput\", e);\n    this.setState({\n      initData: { ...initData,\n        audioOutput: e\n      }\n    });\n  }\n\n  videoProlieChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"videoProlie\", e);\n    this.setState({\n      initData: { ...initData,\n        videoProlie: e\n      }\n    });\n  }\n\n  videoCodecChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"videoCodec\", e);\n    this.setState({\n      initData: { ...initData,\n        videoCodec: e\n      }\n    });\n  }\n\n  AppKeyChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"AppKey\", e.target.value);\n    this.setState({\n      initData: { ...initData,\n        AppKey: e.target.value\n      },\n      AppKey: e.target.value\n    });\n  }\n\n  AppIdChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"AppId\", e.target.value);\n    this.setState({\n      initData: { ...initData,\n        AppId: e.target.value\n      },\n      AppId: e.target.value\n    });\n  }\n\n  setOk() {\n    let initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.settingsData(initData);\n    storeSettings.settingsActive(false);\n    this.setState({\n      setVisible: false\n    });\n  }\n\n  apiLinkChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"apiLink\", e.target.value);\n    this.setState({\n      initData: { ...initData,\n        apiLink: e.target.value\n      }\n    });\n  }\n\n  logLinkChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"logLink\", e.target.value);\n    this.setState({\n      initData: { ...initData,\n        logLink: e.target.value\n      }\n    });\n  }\n\n  signalLinkChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"signalLink\", e.target.value);\n    this.setState({\n      initData: { ...initData,\n        signalLink: e.target.value\n      }\n    });\n  }\n\n  render() {\n    const {\n      videoInputList,\n      audioInputList,\n      audioOutputList,\n      videoProlieList,\n      videoCodecList,\n      AppId,\n      AppKey,\n      setVisible,\n      isPhone,\n      signalLink\n    } = this.state; // console.log(this.props.store.settings.roomType)\n    // const { settings,Settings } = this.props.store;\n\n    let {\n      settings\n    } = this.props.store;\n    console.log(\"settings.videoInput\", settings.videoInput);\n    return /*#__PURE__*/React.createElement(_Modal, {\n      visible: setVisible,\n      size: \"md\",\n      onClose: this.setClose,\n      onOk: this.setOk,\n      className: \"setting-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_Form, {\n      className: \"settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u623F\\u95F4\\u7C7B\\u578B\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.roomType,\n      disabled: !isSupportWebRTC(),\n      onChange: this.roomTypeChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Option, {\n      value: \"rtc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 15\n      }\n    }, \"\\u5C0F\\u73ED\\u8BFE\"), /*#__PURE__*/React.createElement(Option, {\n      value: \"live\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 15\n      }\n    }, \"\\u5927\\u73ED\\u8BFE\"))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u7528\\u6237\\u89D2\\u8272\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.userRole,\n      disabled: !isSupportWebRTC(),\n      onChange: this.userRoleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 13\n      }\n    }, settings.roomType !== \"rtc\" ? /*#__PURE__*/React.createElement(Option, {\n      value: \"push\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }\n    }, \"\\u63A8\\u6D41\") : null, settings.roomType !== \"rtc\" || !isSupportWebRTC() ? /*#__PURE__*/React.createElement(Option, {\n      value: \"pull\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 17\n      }\n    }, \"\\u62C9\\u6D41\") : null, /*#__PURE__*/React.createElement(Option, {\n      value: \"push-and-pull\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 15\n      }\n    }, \"\\u63A8\\u6D41+\\u62C9\\u6D41\"))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u7528\\u6237ID\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Input, {\n      value: settings.userId,\n      onChange: this.userIdChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u6444\\u50CF\\u5934\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.videoInput,\n      onChange: this.videoInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 13\n      }\n    }, videoInputList.map((v, i) => /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: v.deviceId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }\n    }, v.label)))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u9EA6\\u514B\\u98CE\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.audioInput,\n      onChange: this.audioInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 13\n      }\n    }, audioInputList.map((v, i) => /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: v.deviceId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }\n    }, v.label)))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u626C\\u58F0\\u5668\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.audioOutput,\n      onChange: this.audioOutputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 13\n      }\n    }, audioOutputList.map((v, i) => /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: v.deviceId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 17\n      }\n    }, v.label)))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u5206\\u8FA8\\u7387\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.videoProlie,\n      onChange: this.videoProlieChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 13\n      }\n    }, videoProlieList.map((v, i) => /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: v,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 17\n      }\n    }, v)))), isPhone ? null : /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u684C\\u9762\\u5206\\u8FA8\\u7387\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.desktopProfile,\n      onChange: this.desktopProlieChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 15\n      }\n    }, videoProlieList.map((v, i) => /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: v,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 19\n      }\n    }, v)))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u89C6\\u9891\\u683C\\u5F0F\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Select, {\n      value: settings.videoCodec,\n      onChange: this.videoCodecChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 13\n      }\n    }, videoCodecList.map((v, i) => /*#__PURE__*/React.createElement(Option, {\n      key: i,\n      value: v,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 17\n      }\n    }, v)))), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"AppId\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Input, {\n      value: AppId,\n      onChange: this.AppIdChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"AppKey\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Input, {\n      value: AppKey,\n      onChange: this.AppKeyChange,\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Item, Object.assign({\n      label: \"\\u79C1\\u6709\\u90E8\\u7F72\\u5730\\u5740\\uFF1A\"\n    }, itemLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(_Input, {\n      placeholder: \"\\u4F8B\\u5982\\uFF1Awss://domain:5005\",\n      style: {\n        width: '200px'\n      },\n      value: signalLink,\n      onChange: this.signalLinkChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}, _temp)) || _class) || _class);\nexport default Settings;","map":{"version":3,"sources":["/Users/lixiqing/work/URTC-DEOM/src/components/settings.jsx"],"names":["React","observer","inject","sdk","config","isPC","isSupportWebRTC","Item","Option","itemLayout","labelCol","span","controllerCol","Settings","Component","constructor","props","desktopProlieChange","e","initData","state","storeSettings","store","settings","setParamKey","setState","desktopProfile","userIdChange","target","value","userId","loading","visible","roomType","userRole","userName","videoInput","audioInput","audioOutput","videoProlie","videoCodec","AppKey","AppId","apiLink","logLink","signalLink","videoInputList","audioInputList","audioOutputList","videoProlieList","videoCodecList","isPhone","setClose","bind","roomTypeChange","userRoleChange","setOk","userNameChange","videoInputChange","audioInputChange","audioOutputChange","videoProlieChange","videoCodecChange","AppKeyChange","AppIdChange","apiLinkChange","logLinkChange","signalLinkChange","componentDidMount","getDeviceData","getSupportProfile","getSupportedCodec","componentWillReceiveProps","nextProps","setVisible","video","getSupportProfileNames","_this","getDevices","forEach","data","kind","console","log","push","deviceId","settingsActive","settingsData","render","map","v","i","label","width"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport sdk from \"urtc-sdk\";\nimport \"./settings.css\";\nimport { Modal, Input, Form, Select } from \"@ucloud-fe/react-components\";\nimport config from \"../config\";\nimport { isPC } from \"../util/index\";\nconst { isSupportWebRTC } = sdk;\nconst { Item } = Form;\nconst { Option } = Select;\nconst itemLayout = {\n  labelCol: {\n    span: 2,\n  },\n  controllerCol: {\n    span: 10,\n  },\n};\n\n@inject(\"store\")\n@observer\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      visible: false,\n      initData: {\n        roomType: \"rtc\", //房间类型\n        userRole: \"push-and-pull\", //用户角色\n        userName: \"\", //用户名\n        userId: \"\", //id\n        videoInput: \"\", //摄像头\n        audioInput: \"default\", //麦克风\n        audioOutput: \"default\", //扬声器\n        videoProlie: \"640*360\", //视频分辨率\n        desktopProfile: \"1280*720\",\n        videoCodec: \"vp8\", //视频编码\n        AppKey: 'kejin', //AppKey\n        AppId: 'kejin', //AppId\n        apiLink: '',\n        logLink: '',\n        signalLink: 'wss://rtc.example.com:5005'\n      },\n      videoInputList: [],\n      audioInputList: [],\n      audioOutputList: [],\n      videoProlieList: [],\n      videoCodecList: [],\n      AppKey: config.AppKey, //AppKey\n      AppId: config.AppId, //AppId\n      isPhone: !isPC(),\n    };\n    this.setClose = this.setClose.bind(this);\n    this.roomTypeChange = this.roomTypeChange.bind(this);\n    this.userRoleChange = this.userRoleChange.bind(this);\n    this.setOk = this.setOk.bind(this);\n    this.userNameChange = this.userNameChange.bind(this);\n    this.videoInputChange = this.videoInputChange.bind(this);\n    this.audioInputChange = this.audioInputChange.bind(this);\n    this.audioOutputChange = this.audioOutputChange.bind(this);\n    this.videoProlieChange = this.videoProlieChange.bind(this);\n    this.videoCodecChange = this.videoCodecChange.bind(this);\n    this.AppKeyChange = this.AppKeyChange.bind(this);\n    this.AppIdChange = this.AppIdChange.bind(this);\n    this.apiLinkChange = this.apiLinkChange.bind(this);\n    this.logLinkChange = this.logLinkChange.bind(this);\n    this.signalLinkChange = this.signalLinkChange.bind(this);\n  }\n  componentDidMount() {\n    this.getDeviceData();\n    this.getSupportProfile();\n    this.getSupportedCodec();\n    const initData = this.state.initData;\n    this.setState({\n      signalLink: initData.signalLink\n    });\n  }\n  componentWillReceiveProps(nextProps) {\n    let storeSettings = this.props.store.settings;\n    const initData = this.state.initData;\n    this.setState({\n      setVisible: storeSettings.setVisible,\n      initData: { ...initData, userId: storeSettings.userId },\n    });\n  }\n\n  getSupportedCodec() {\n    sdk.getSupportedCodec((e) => {\n      this.setState({\n        videoCodecList: e.video,\n      });\n    });\n  }\n  getSupportProfile() {\n    this.setState({\n      videoProlieList: sdk.getSupportProfileNames(),\n    });\n  }\n  getDeviceData() {\n    let _this = this;\n    let videoInput = [];\n    let audioInput = [];\n    let audioOutput = [];\n    sdk.getDevices((e) => {\n      e.forEach(function (data) {\n        if (data.kind === \"videoinput\") {\n          console.log(\"device info \", data);\n          videoInput.push(data);\n        } else if (data.kind === \"audioinput\") {\n          audioInput.push(data);\n        } else if (data.kind === \"audiooutput\") {\n          audioOutput.push(data);\n        }\n      });\n\n      let storeSettings = this.props.store.settings;\n      console.log(\"videoInput[0].deviceId\", videoInput[0].deviceId);\n      storeSettings.setParamKey(\"videoInput\", videoInput[0].deviceId);\n\n      const initData = _this.state.initData;\n      this.setState({\n        videoInputList: videoInput,\n        audioInputList: audioInput,\n        audioOutputList: audioOutput,\n        initData: { ...initData, videoInput: videoInput[0].deviceId },\n      });\n    });\n  }\n  setClose() {\n    this.setState({\n      setVisible: false,\n    });\n    let storeSettings = this.props.store.settings;\n    storeSettings.settingsActive(false);\n    // console.log(this.props)\n    // this.props.visible(false)\n  }\n  roomTypeChange(e) {\n    const initData = this.state.initData;\n    if (e === \"rtc\") {\n      console.log(\"roomTypeChange\", e);\n      this.setState({\n        initData: { ...initData, userRole: \"push-and-pull\", roomType: e },\n      });\n      let storeSettings = this.props.store.settings;\n      storeSettings.setParamKey(\"userRole\", \"push-and-pull\");\n      storeSettings.setParamKey(\"roomType\", e);\n    } else {\n      let storeSettings = this.props.store.settings;\n      storeSettings.setParamKey(\"roomType\", e);\n      this.setState({\n        initData: { ...initData, roomType: e },\n      });\n    }\n  }\n  userRoleChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"userRole\", e);\n    this.setState({\n      initData: { ...initData, userRole: e },\n    });\n  }\n  userNameChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"userName\", e.target.value);\n    this.setState({\n      initData: { ...initData, userName: e.target.value },\n    });\n  }\n  videoInputChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"videoInput\", e);\n    this.setState({\n      initData: { ...initData, videoInput: e },\n    });\n  }\n  audioInputChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"audioInput\", e);\n    this.setState({\n      initData: { ...initData, audioInput: e },\n    });\n  }\n  audioOutputChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"audioOutput\", e);\n    this.setState({\n      initData: { ...initData, audioOutput: e },\n    });\n  }\n  videoProlieChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"videoProlie\", e);\n    this.setState({\n      initData: { ...initData, videoProlie: e },\n    });\n  }\n  desktopProlieChange = (e) => {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"desktopProfile\", e);\n    this.setState({\n      initData: { ...initData, desktopProfile: e },\n    });\n  };\n  videoCodecChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"videoCodec\", e);\n    this.setState({\n      initData: { ...initData, videoCodec: e },\n    });\n  }\n  AppKeyChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"AppKey\", e.target.value);\n    this.setState({\n      initData: { ...initData, AppKey: e.target.value },\n      AppKey: e.target.value,\n    });\n  }\n  userIdChange = (e) => {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"userId\", e.target.value);\n    this.setState({\n      initData: { ...initData, userId: e.target.value },\n    });\n  };\n\n  AppIdChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"AppId\", e.target.value);\n    this.setState({\n      initData: { ...initData, AppId: e.target.value },\n      AppId: e.target.value,\n    });\n  }\n  setOk() {\n    let initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.settingsData(initData);\n    storeSettings.settingsActive(false);\n    this.setState({\n      setVisible: false,\n    });\n  }\n  apiLinkChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"apiLink\", e.target.value);\n    this.setState({\n      initData: { ...initData, apiLink: e.target.value },\n    });\n  }\n  logLinkChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"logLink\", e.target.value);\n    this.setState({\n      initData: { ...initData, logLink: e.target.value },\n    });\n  }\n  signalLinkChange(e) {\n    const initData = this.state.initData;\n    let storeSettings = this.props.store.settings;\n    storeSettings.setParamKey(\"signalLink\", e.target.value);\n    this.setState({\n      initData: { ...initData, signalLink: e.target.value },\n    });\n  }\n  render() {\n    const {\n      videoInputList,\n      audioInputList,\n      audioOutputList,\n      videoProlieList,\n      videoCodecList,\n      AppId,\n      AppKey,\n      setVisible,\n      isPhone,\n      signalLink\n    } = this.state;\n    // console.log(this.props.store.settings.roomType)\n    // const { settings,Settings } = this.props.store;\n    let { settings } = this.props.store;\n    console.log(\"settings.videoInput\", settings.videoInput);\n\n    return (\n      <Modal\n        visible={setVisible}\n        size=\"md\"\n        onClose={this.setClose}\n        onOk={this.setOk}\n        className=\"setting-modal\"\n      >\n        <Form className=\"settings\">\n          <Item label=\"房间类型：\" {...itemLayout}>\n            <Select\n              value={settings.roomType}\n              disabled={!isSupportWebRTC()}\n              onChange={this.roomTypeChange}\n            >\n              <Option value={\"rtc\"}>小班课</Option>\n              <Option value={\"live\"}>大班课</Option>\n            </Select>\n          </Item>\n          <Item label=\"用户角色：\" {...itemLayout}>\n            <Select\n              value={settings.userRole}\n              disabled={!isSupportWebRTC()}\n              onChange={this.userRoleChange}\n            >\n              {settings.roomType !== \"rtc\" ? (\n                <Option value={\"push\"}>推流</Option>\n              ) : null}\n              {settings.roomType !== \"rtc\" || !isSupportWebRTC() ? (\n                <Option value={\"pull\"}>拉流</Option>\n              ) : null}\n\n              <Option value={\"push-and-pull\"}>推流+拉流</Option>\n            </Select>\n          </Item>\n          {/* <Item label=\"用户名：\" {...itemLayout}>\n            <Input onChange={this.userNameChange} />\n          </Item> */}\n          <Item label=\"用户ID：\" {...itemLayout}>\n            <Input value={settings.userId} onChange={this.userIdChange} />\n          </Item>\n          <Item label=\"摄像头：\" {...itemLayout}>\n            <Select\n              value={settings.videoInput}\n              onChange={this.videoInputChange}\n            >\n              {videoInputList.map((v, i) => (\n                <Option key={i} value={v.deviceId}>\n                  {v.label}\n                </Option>\n              ))}\n            </Select>\n          </Item>\n          <Item label=\"麦克风：\" {...itemLayout}>\n            <Select\n              value={settings.audioInput}\n              onChange={this.audioInputChange}\n            >\n              {audioInputList.map((v, i) => (\n                <Option key={i} value={v.deviceId}>\n                  {v.label}\n                </Option>\n              ))}\n            </Select>\n          </Item>\n          <Item label=\"扬声器：\" {...itemLayout}>\n            <Select\n              value={settings.audioOutput}\n              onChange={this.audioOutputChange}\n            >\n              {audioOutputList.map((v, i) => (\n                <Option key={i} value={v.deviceId}>\n                  {v.label}\n                </Option>\n              ))}\n            </Select>\n          </Item>\n          <Item label=\"分辨率：\" {...itemLayout}>\n            <Select\n              value={settings.videoProlie}\n              onChange={this.videoProlieChange}\n            >\n              {videoProlieList.map((v, i) => (\n                <Option key={i} value={v}>\n                  {v}\n                </Option>\n              ))}\n            </Select>\n          </Item>\n          {isPhone ? null : (\n            <Item label=\"桌面分辨率：\" {...itemLayout}>\n              <Select\n                value={settings.desktopProfile}\n                onChange={this.desktopProlieChange}\n              >\n                {videoProlieList.map((v, i) => (\n                  <Option key={i} value={v}>\n                    {v}\n                  </Option>\n                ))}\n              </Select>\n            </Item>\n          )}\n\n          <Item label=\"视频格式：\" {...itemLayout}>\n            <Select\n              value={settings.videoCodec}\n              onChange={this.videoCodecChange}\n            >\n              {videoCodecList.map((v, i) => (\n                <Option key={i} value={v}>\n                  {v}\n                </Option>\n              ))}\n            </Select>\n          </Item>\n          <Item label=\"AppId：\" {...itemLayout}>\n            <Input value={AppId} onChange={this.AppIdChange} />\n          </Item>\n          <Item label=\"AppKey：\" {...itemLayout}>\n            <Input\n              value={AppKey}\n              onChange={this.AppKeyChange}\n              type=\"password\"\n            />\n          </Item>\n          <Item label=\"私有部署地址：\" {...itemLayout}>\n            <Input placeholder=\"例如：wss://domain:5005\" style={{ width: '200px' }} value={signalLink} onChange={this.signalLinkChange} />\n          </Item>\n          {/* <Group title=\"\">\n            <Item label=\"房间地址\" {...itemLayout}>\n                <Input placeholder=\"例如：wss://domain:5005\" style={{width:'200px'}} value={apiLink} onChange={this.apiLinkChange} />\n            </Item>\n            <Item label=\"日志地址\" {...itemLayout}>\n                <Input style={{width:'200px'}} value={logLink} onChange={this.logLinkChange} />\n            </Item>\n        </Group> */}\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default Settings;\n"]},"metadata":{},"sourceType":"module"}